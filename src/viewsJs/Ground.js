import * as THREE from 'three';
import * as CANNON from 'cannon-es';
import {PWorld, PShere, PJumpSphere, PPolyhedron, PBox } from '../PWorld/PObjects.js'
import { getDiceCubeMaterial, getEarthMaterial, getMeshWireMaterial } from '../PWorld/Scene/MeshMaterials.js'
import { BoxComposer } from '../PWorld/Tools/Composer.js';


const world = new PWorld({
    cameraPosition: [10, 40, 60],
    // gravity: [0, -1, 0],
    useGround: true,
    groundSize: [75, 75],
    useWorldRadius: true,    
    worldRadius: 100
});

const boxComposer = new BoxComposer({
    // position: [0, 15, 0],
    color: 0x0000ff,
    data: [[[5, 10, 1], [30, 5, 0], [0, 0, 0, 1]], [[5, 10, 1], [29.630650217854132, 5, 4.693033951206926], [0, -0.07845909572784496, 0, 0.996917333733128]], [[5, 10, 1], [28.531695488854606, 5, 9.270509831248422], [0, -0.15643446504023084, 0, 0.9876883405951378]], [[5, 10, 1], [26.730195725651036, 5, 13.619714992186402], [0, -0.23344536385590542, 0, 0.9723699203976766]], [[5, 10, 1], [24.270509831248425, 5, 17.633557568774194], [0, -0.3090169943749474, 0, 0.9510565162951535]], [[5, 10, 1], [21.213203435596427, 5, 21.213203435596427], [0, -0.38268343236508984, 0, 0.9238795325112867]], [[5, 10, 1], [17.633557568774194, 5, 24.270509831248425], [0, -0.4539904997395468, 0, 0.8910065241883679]], [[5, 10, 1], [13.619714992186404, 5, 26.730195725651033], [0, -0.5224985647159488, 0, 0.8526401643540922]], [[5, 10, 1], [9.270509831248424, 5, 28.531695488854606], [0, -0.587785252292473, 0, 0.8090169943749475]], [[5, 10, 1], [4.693033951206928, 5, 29.630650217854132], [0, -0.6494480483301837, 0, 0.7604059656000309]], [[5, 10, 1], [1.83697019872103E-15, 5, 30], [0, -0.7071067811865475, 0, 0.7071067811865476]], [[5, 10, 1], [-4.6930339512069175, 5, 29.630650217854132], [0, -0.7604059656000308, 0, 0.6494480483301838]], [[5, 10, 1], [-9.27050983124842, 5, 28.53169548885461], [0, -0.8090169943749475, 0, 0.5877852522924731]], [[5, 10, 1], [-13.619714992186402, 5, 26.730195725651036], [0, -0.8526401643540922, 0, 0.5224985647159489]], [[5, 10, 1], [-17.63355756877419, 5, 24.270509831248425], [0, -0.8910065241883678, 0, 0.45399049973954686]], [[5, 10, 1], [-21.213203435596423, 5, 21.213203435596427], [0, -0.9238795325112867, 0, 0.38268343236508984]], [[5, 10, 1], [-24.27050983124842, 5, 17.633557568774197], [0, -0.9510565162951535, 0, 0.3090169943749475]], [[5, 10, 1], [-26.730195725651033, 5, 13.619714992186406], [0, -0.9723699203976762, 0, 0.2334453638559055]], [[5, 10, 1], [-28.531695488854606, 5, 9.270509831248425], [0, -0.9876883405951377, 0, 0.15643446504023092]], [[5, 10, 1], [-29.63065021785413, 5, 4.693033951206929], [0, -0.9969173337331261, 0, 0.07845909572784515]], [[5, 10, 1], [-30, 5, 3.67394039744206E-15], [0, 1, 0, 6.123233995736766E-17]], [[5, 10, 1], [-29.630650217854132, 5, -4.693033951206922], [-0, 0.996917333733129, 0, 0.0784590957278448]], [[5, 10, 1], [-28.531695488854613, 5, -9.270509831248408], [-0, 0.9876883405951378, 0, 0.1564344650402306]], [[5, 10, 1], [-26.730195725651036, 5, -13.619714992186399], [-0, 0.9723699203976764, 0, 0.23344536385590536]], [[5, 10, 1], [-24.270509831248425, 5, -17.63355756877419], [-0, 0.9510565162951534, 0, 0.3090169943749474]], [[5, 10, 1], [-21.21320343559643, 5, -21.213203435596423], [-0, 0.9238795325112868, 0, 0.38268343236508967]], [[5, 10, 1], [-17.633557568774197, 5, -24.27050983124842], [-0, 0.8910065241883679, 0, 0.45399049973954675]], [[5, 10, 1], [-13.619714992186408, 5, -26.730195725651033], [-0, 0.8526401643540923, 0, 0.5224985647159488]], [[5, 10, 1], [-9.270509831248427, 5, -28.531695488854606], [-0, 0.8090169943749476, 0, 0.587785252292473]], [[5, 10, 1], [-4.693033951206931, 5, -29.63065021785413], [-0, 0.760405965600031, 0, 0.6494480483301835]], [[5, 10, 1], [-5.510910596163089E-15, 5, -30], [-0, 0.7071067811865476, 0, 0.7071067811865475]], [[5, 10, 1], [4.69303395120692, 5, -29.630650217854132], [-0, 0.6494480483301837, 0, 0.7604059656000309]], [[5, 10, 1], [9.270509831248416, 5, -28.53169548885461], [-0, 0.5877852522924732, 0, 0.8090169943749473]], [[5, 10, 1], [13.619714992186399, 5, -26.73019572565104], [-0, 0.522498564715949, 0, 0.8526401643540922]], [[5, 10, 1], [17.633557568774187, 5, -24.270509831248425], [-0, 0.45399049973954686, 0, 0.8910065241883678]], [[5, 10, 1], [21.21320343559642, 5, -21.21320343559643], [-0, 0.3826834323650899, 0, 0.9238795325112867]], [[5, 10, 1], [24.27050983124842, 5, -17.6335575687742], [-0, 0.30901699437494756, 0, 0.9510565162951535]], [[5, 10, 1], [26.730195725651033, 5, -13.61971499218641], [-0, 0.23344536385590553, 0, 0.9723699203976766]], [[5, 10, 1], [28.531695488854606, 5, -9.27050983124843], [-0, 0.15643446504023098, 0, 0.9876883405951378]], [[5, 10, 1], [29.63065021785413, 5, -4.693033951206933], [-0, 0.07845909572784507, 0, 0.996917333733128]]]
})

// one body - one mesh
const objects = [
    ...boxComposer.getObjects()
];

world.init(objects);

// world.update();
world.objects[0].body.applyForce(new THREE.Vector3(0, 0, 10000))

// Animation loop
function animate() {
    world.update();
    requestAnimationFrame(animate);
}

animate();
